"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4563],{3971:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>i});var a=t(4848),r=t(8453);const s={},o="Firebase Database",l={id:"framework/google-project/firebase-database",title:"Firebase Database",description:"- Document//firebase.google.com/docs/web/setup.",source:"@site/content/framework/google-project/firebase-database.md",sourceDirName:"framework/google-project",slug:"/framework/google-project/firebase-database",permalink:"/blog/content/framework/google-project/firebase-database",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/content/framework/google-project/firebase-database.md",tags:[],version:"current",frontMatter:{},sidebar:"googleProjectSidebar",previous:{title:"Firebase Cloud Firestore",permalink:"/blog/content/framework/google-project/firebase-cloud-firestore"},next:{title:"Google Apis",permalink:"/blog/content/framework/google-project/google-apis"}},d={},i=[];function c(e){const n={a:"a",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"firebase-database",children:"Firebase Database"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Document:  ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"https://firebase.google.com/docs/web/setup",children:"https://firebase.google.com/docs/web/setup"})}),"."]}),"\n",(0,a.jsx)(n.li,{children:"C\u1ea7n c\xe0i \u0111\u1eb7t ph\xe2n quy\u1ec1n trong m\u1ee5c Rules tr\u01b0\u1edbc \u0111\u1ec3 d\u1ec5 d\xe0ng s\u1eeda \u0111\u1ed3i"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "rules": {\n    ".read": true,\n    ".write": true,\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"N\u1ebfu ch\u1ec9 s\u1eed d\u1ee5ng Realtime Database, ch\u1ec9 c\u1ea7n c\xe0i \u0111\u1eb7t firebase-app v\xe0 firebase-database. Config c\u0169ng ch\u1ec9 c\u1ea7n databaseURL l\xe0 qu\xe1 \u0111\u1ee7"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Realtime Database</title>\n    <style>\n        table {\n            border-collapse: collapse;\n            counter-reset: row_number 0;\n        }\n\n        tbody tr {\n            counter-increment: row_number 1;\n        }\n\n        tbody tr td:first-child::before {\n            content: counter(row_number);\n        }\n\n        th,\n        td {\n            padding: 0 0.5rem;\n            border: 1px solid black;\n        }\n    </style>\n</head>\n\n<body>\n    <div id="app">\n        <input type="text" placeholder="username" id="ip_username"><br />\n        <input type="text" placeholder="email" id="ip_email"> <br />\n        <button onclick="add_user(); reset_form()">Add User</button>\n        <button onclick="update_user(); reset_form()">Update User</button>\n        <button onclick="replace_user(); reset_form()">Replace User</button><br /><br />\n\n        <table>\n            <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Username</th>\n                    <th>Email</th>\n                    <th>Action</th>\n                </tr>\n            </thead>\n            <tbody id="tbody_list"></tbody>\n        </table>\n    </div>\n\n    <script>\n        let ip_username = document.getElementById("ip_username");\n        let ip_email = document.getElementById("ip_email");\n        let tbody_list = document.getElementById("tbody_list");\n        let uid = null;\n\n        let create_row = (key, value) => {\n            let tr = document.createElement("tr");\n            tr.innerHTML = `<td data-id="${key}"></td><td>${value.username}</td><td>${value.email}</td>\n                            <td><button onClick=get_user("${key}")>S\u1eeda</button>\n                                <button onClick=delete_user("${key}")>X\xf3a</button></td>`;\n            return tr;\n        }\n\n        let add_row_table = (key, value) => {\n            let tr = create_row(key, value);\n            tbody_list.appendChild(tr);\n        }\n\n        let redraw_table = (listUser) => {\n            tbody_list.innerHTML = "";\n            Object.entries(listUser).forEach(([key, value], index) => {\n                add_row_table(key, value)\n            });\n        }\n\n        const reset_form = () => {\n            ip_username.value = "";\n            ip_email.value = "";\n            uid = null;\n        }\n    <\/script>\n\n    \x3c!-- Link setup firebase: https://firebase.google.com/docs/web/setup --\x3e\n    <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-app.js"><\/script>\n    <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-database.js"><\/script>\n    <script>\n        //N\u1ebfu ch\u1ec9 d\xf9ng Database Realtime, ch\u1ec9 c\u1ea7n config: databaseURL\n        firebase.initializeApp({\n            databaseURL: "https://duycode-com-default-rtdb.asia-southeast1.firebasedatabase.app/",\n        });\n        //0. Gi\u1ea3 s\u1eed ban \u0111\u1ea7u, database tr\u1ed1ng tr\u01a1n, "null" \u0111\xf3.\n        const usersRef = firebase.database().ref(\'/users\');\n\n        // 1. CREAD: Add new User\n        let add_user = () => {\n            let user = {\n                username: ip_username.value,\n                email: ip_email.value,\n            }\n            //push(): l\xe0 ch\u1ec9 \u0111\u1ecbnh 1 \u0111\u01b0\u1eddng d\u1eabn con b\xean trong "/users" d\u1ea1ng "users/SDFWVX234ds"\n            //Khi set, \u0111\u01b0\u1eddng d\u1eabn "users/SDFWVX234ds" s\u1ebd t\u1ef1 \u0111\u1ed9ng \u0111\u01b0\u1ee3c t\u1ea1o tr\xean database\n            usersRef.push().set(user)\n                .then(res => console.log("Add User Success !!!", res))\n                .catch(err => console.error(err))\n        }\n\n        // 2. READ: "get": ch\u1ec9 \u0111\u1ecdc database 1 l\u1ea7n duy nh\u1ea5t\n        let get_user = (userId) => {\n            usersRef.child(userId).get()\n                .then((snapshot) => {\n                    if (snapshot.exists()) {\n                        ip_username.value = snapshot.val().username;\n                        ip_email.value = snapshot.val().email;\n                        uid = snapshot.key;\n                    } else {\n                        console.log("No data available");\n                    }\n                })\n                .catch(err => console.error(err))\n        }\n\n        // 3. UPDATE\n        let update_user = () => {\n            let list_update = {};\n            // C\xf3 th\u1ec3 update nhi\u1ec1u tr\u01b0\u1eddng 1 l\xfac, v\u1edbi key l\xe0 uid. Tr\u01b0\u1eddng h\u1ee3p n\xe0y ch\u1ec9 update 1 field :D\n            list_update[uid] = {\n                username: ip_username.value,\n                email: ip_email.value,\n            }\n            usersRef.update(list_update)\n                .then((res) => { console.log("Update User Success !!!", res); })\n                .catch(err => { console.error(err) })\n        }\n\n        // 4. REPLACE\n        let replace_user = () => {\n            let user = {\n                username: ip_username.value,\n                email: ip_email.value,\n            }\n            usersRef.child(uid).set(user)\n                .then((res) => { console.log("Update User Success !!!", res); })\n                .catch(err => { console.error(err) })\n        }\n\n        // 5. DELETE: C\xf3 th\u1ec3 d\xf9ng remove, ho\u1eb7c "set(null)", ho\u1eb7c update v\u1edbi "[key]: null"\n        let delete_user = (uid) => {\n            usersRef.child(uid).remove();\n            // firebase.database().ref(\'users/\' + uid).set(null)\n            // usersRef.update({[uid]: null})\n        }\n\n\n        // 6.1. READ LIST: "on": \u0110\u1ecdc d\u1eef li\u1ec7u v\xe0 l\u1eafng nghe database li\xean t\u1ee5c\n        //Nh\u01b0 v\u1eady 6 v\xe0 7 kh\xf4ng n\xean s\u1eed d\u1ee5ng c\xf9ng nhau\n        usersRef.on(\'value\', (snapshot) => {\n            let listUser = snapshot.val() || {};\n            //redraw_table(listUser);\n        });\n\n        //6.2. READ LIST: "once": Ch\u1ec9 \u0111\u1ecdc database 1 l\u1ea7n duy nh\u1ea5t\n        usersRef.once(\'value\')\n            .then((snapshot) => {\n                let listUser = snapshot.val() || {};\n                //redraw_table(listUser);\n            })\n            .catch(err => { console.error(err) })\n\n\n        //7. Event: C\xf3 th\u1ec3 l\u1eafng nghe c\xe1c s\u1ef1 ki\u1ec7n c\u1ee7a children khi th\xeam s\u1eeda x\xf3a\n        // Khi kh\u1edfi ch\u1ea1y, d\xf9 th\u1eb1ng cha c\xf3 nhi\u1ec1u th\u1eb1ng con t\u1eeb tr\u01b0\u1edbc\n        // nh\u01b0ng th\u1eb1ng "child_added" l\u1ea1i c\u1ee9 hi\u1ec3u l\xe0 m\u1edbi nh\u1eadn v\u1ec1. th\u1ebf m\u1edbi \u0111au\n        usersRef.on(\'child_added\', (data) => {\n            add_row_table(data.key, data.val());\n        });\n\n        usersRef.on(\'child_changed\', (data) => {\n            let new_tr = create_row(data.key, data.val());\n            let td = document.querySelector(`td[data-id="${data.key}"]`);\n            td.closest(\'tr\').outerHTML = new_tr.outerHTML;\n        });\n\n        usersRef.on(\'child_removed\', (data) => {\n            let td = document.querySelector(`td[data-id="${data.key}"]`);\n            td.closest(\'tr\').remove();\n        });\n    <\/script>\n</body>\n\n</html>\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var a=t(6540);const r={},s=a.createContext(r);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);