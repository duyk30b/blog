"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5743],{2725:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var r=t(4848),o=t(8453);const s={},a="Firebase Cloud Firestore",c={id:"framework/google-project/firebase-cloud-firestore",title:"Firebase Cloud Firestore",description:"- Document//firebase.google.com/docs/web/setup.",source:"@site/content/framework/google-project/firebase-cloud-firestore.md",sourceDirName:"framework/google-project",slug:"/framework/google-project/firebase-cloud-firestore",permalink:"/blog/content/framework/google-project/firebase-cloud-firestore",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/content/framework/google-project/firebase-cloud-firestore.md",tags:[],version:"current",frontMatter:{},sidebar:"googleProjectSidebar",previous:{title:"Firebase Authentication",permalink:"/blog/content/framework/google-project/firebase-authentication"},next:{title:"Firebase Database",permalink:"/blog/content/framework/google-project/firebase-database"}},l={},i=[];function d(e){const n={a:"a",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"firebase-cloud-firestore",children:"Firebase Cloud Firestore"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Document:  ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://firebase.google.com/docs/web/setup",children:"https://firebase.google.com/docs/web/setup"})}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Cloud Firestore</title>\n    <style>\n        table {\n            border-collapse: collapse;\n            counter-reset: row_number 0;\n        }\n\n        tbody tr {\n            counter-increment: row_number 1;\n        }\n\n        tbody tr td:first-child::before {\n            content: counter(row_number);\n        }\n\n        th,\n        td {\n            padding: 0 0.5rem;\n            border: 1px solid black;\n        }\n    </style>\n</head>\n\n<body>\n    <div id="app">\n        <input type="text" placeholder="username" id="ip_username"><br />\n        <input type="text" placeholder="email" id="ip_email"> <br />\n        <button onclick="add_user(); reset_form()">Add User</button>\n        <button onclick="update_user(); reset_form()">Update User</button>\n        <button onclick="replace_user(); reset_form()">Replace User</button><br /><br />\n\n        <table>\n            <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Username</th>\n                    <th>Email</th>\n                    <th>Action</th>\n                </tr>\n            </thead>\n            <tbody id="tbody_list"></tbody>\n        </table>\n    </div>\n\n    <script>\n        let ip_username = document.getElementById("ip_username");\n        let ip_email = document.getElementById("ip_email");\n        let tbody_list = document.getElementById("tbody_list");\n        let uid = null;\n\n        let create_row = (key, value) => {\n            let tr = document.createElement("tr");\n            tr.innerHTML = `<td data-id="${key}"></td><td>${value.username}</td><td>${value.email}</td>\n                            <td><button onClick=get_user("${key}")>S\u1eeda</button>\n                                <button onClick=delete_user("${key}")>X\xf3a</button></td>`;\n            return tr;\n        }\n\n        let add_row_table = (key, value) => {\n            let tr = create_row(key, value);\n            tbody_list.appendChild(tr);\n        }\n\n        let redraw_table = (listUser) => {\n            tbody_list.innerHTML = "";\n            Object.entries(listUser).forEach(([key, value], index) => {\n                add_row_table(key, value)\n            });\n        }\n\n        const reset_form = () => {\n            ip_username.value = "";\n            ip_email.value = "";\n            uid = null;\n        }\n    <\/script>\n\n    \x3c!-- Link setup firebase: https://firebase.google.com/docs/web/setup --\x3e\n    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"><\/script>\n    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-firestore.js"><\/script>\n    <script>\n        //N\u1ebfu ch\u1ec9 d\xf9ng Database Realtime, ch\u1ec9 c\u1ea7n config: databaseURL\n        firebase.initializeApp({\n            apiKey: \'AIzaSyADcAyM-3Fb7ZJdJf86yLKFUnZmxx-QHmU\',\n            authDomain: \'duycode-77e9a.web.app\',\n            projectId: \'duycode-com\'\n        });\n        const _db = firebase.firestore();\n\n        // 1. CREAD: Add new User\n        let add_user = () => {\n            let user = {\n                username: ip_username.value,\n                email: ip_email.value,\n            }\n            // D\xf9ng add => t\u1ef1 \u0111\u1ed9ng t\u1ea1o document m\u1edbi v\xe0 \u0111\u1eb7t auto ID\n            _db.collection("Users").add(user)\n                .then((docRef) => {\n                    console.log("Document written with: ", docRef);\n                })\n                .catch(err => { console.error(err) })\n        }\n\n        // 2. READ: "doc(userId).get()": ch\u1ec9 \u0111\u1ecdc 1 document\n        let get_user = (userId) => {\n            _db.collection("Users").doc(userId).get()\n                .then((querySnapshot) => {\n                    if (querySnapshot.exists) {\n                        ip_username.value = querySnapshot.data().username;\n                        ip_email.value = querySnapshot.data().email;\n                        uid = userId;\n                    }\n                    else console.log("No data available");\n                })\n                .catch(err => { console.error(err) })\n        }\n\n        // 3. UPDATE\n        let update_user = () => {\n            let content = {\n                username: ip_username.value,\n                email: ip_email.value,\n            }\n            _db.collection("Users").doc(uid).update(content)\n                .then((res) => {\n                    console.log("Document successfully update!", res);\n                })\n                .catch(err => { console.error(err) })\n        }\n\n        // 4. REPLACE \n        let replace_user = () => {\n            // D\xf9ng set => t\u1ea1o m\u1edbi ho\u1eb7c replace ch\xednh x\xe1c v\u1ecb tr\xed \u0111\xf3\n            let content = {\n                username: ip_username.value,\n                email: ip_email.value,\n            }\n            _db.collection("Users").doc(uid).set(content)\n                .then(res => console.log("Document successfully replace!", res))\n                .catch(err => console.error(err))\n        }\n\n        //5. DELETE: C\xf3 th\u1ec3 d\xf9ng remove, ho\u1eb7c "set(null)", ho\u1eb7c update v\u1edbi "[key]: null"\n        let delete_user = (uid) => {\n            _db.collection("Users").doc(uid).delete()\n                .then(res => console.log("Document successfully delete!", res))\n                .catch(err => console.error(err))\n            // Chuy\u1ec7n c\u1ee7a delete\n            // /users/J8mSwldSMsL2gAWDRZWi/id123/0UsnLdNdqdmJbMLkXUMf\n\n        }\n\n\n        // 6. READ: "get": Ch\u1ec9 \u0111\u1ecdc database 1 l\u1ea7n duy nh\u1ea5t\n        // Nh\u01b0 v\u1eady 6 v\xe0 7 kh\xf4ng n\xean s\u1eed d\u1ee5ng c\xf9ng nhau\n        _db.collection("Users").get()\n            .then((querySnapshot) => {\n                const listUser = {}\n                querySnapshot.forEach((doc) => {\n                    listUser[doc.id] = doc.data();\n                });\n                // redraw_table(listUser);\n            })\n            .catch(err => { console.error(err) })\n\n\n        // 7. Event: C\xf3 th\u1ec3 l\u1eafng nghe c\xe1c s\u1ef1 ki\u1ec7n c\u1ee7a children khi th\xeam s\u1eeda x\xf3a\n        // Khi kh\u1edfi ch\u1ea1y, d\xf9 th\u1eb1ng cha c\xf3 nhi\u1ec1u th\u1eb1ng con t\u1eeb tr\u01b0\u1edbc\n        // nh\u01b0ng th\u1eb1ng "docChanges()" l\u1ea1i c\u1ee9 hi\u1ec3u l\xe0 m\u1edbi nh\u1eadn v\u1ec1. th\u1ebf m\u1edbi \u0111au\n\n        _db.collection("Users").onSnapshot((snapshot) => {\n            snapshot.docChanges().forEach((change) => {\n                if (change.type === "added") {\n                    add_row_table(change.doc.id, change.doc.data());\n                }\n                if (change.type === "modified") {\n                    let new_tr = create_row(change.doc.id, change.doc.data());\n                    let td = document.querySelector(`td[data-id="${change.doc.id}"]`);\n                    td.closest(\'tr\').outerHTML = new_tr.outerHTML;\n                }\n                if (change.type === "removed") {\n                    let td = document.querySelector(`td[data-id="${change.doc.id}"]`);\n                    td.closest(\'tr\').remove();\n                }\n            });\n        });\n\n    <\/script>\n</body>\n\n</html>\n'})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var r=t(6540);const o={},s=r.createContext(o);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);